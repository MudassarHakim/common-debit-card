spring.application.name=cards-service
server.port=8080

card-repo.url=http://localhost:8080/internal/cards
eligibility.url=https://apbsit110-234.bank.com/customer-products

# Merged from card-repo
spring.datasource.url=jdbc:mysql://localhost:3306/card_repo?allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=user
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=update

spring.kafka.bootstrap-servers=localhost:9093
spring.kafka.consumer.group-id=card-repo-group
spring.kafka.consumer.auto-offset-reset=earliest

profile360.url=https://apbsit110-234.bank.com/profile360

# C360 Sync Configuration
c360.sync.retry.topic=card-events-retry
c360.sync.dlq.topic=card-events-dlq
c360.sync.max-retries=3
c360.sync.initial-delay-ms=1000

# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.c360Sync.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.c360Sync.slow-call-rate-threshold=50
resilience4j.circuitbreaker.instances.c360Sync.slow-call-duration-threshold=5s
resilience4j.circuitbreaker.instances.c360Sync.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.c360Sync.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.c360Sync.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.c360Sync.sliding-window-size=10
resilience4j.circuitbreaker.instances.c360Sync.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.c360Sync.automatic-transition-from-open-to-half-open-enabled=true

# Observability - Metrics
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.c360.sync.duration=true

# Observability - Tracing
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://localhost:9411/api/v2/spans
logging.pattern.level=%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]
